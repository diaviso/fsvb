{% extends 'base.html.twig' %}

{% block title %}Joueur{% endblock %}

{% block body %}

        <div class="row">
          <div class="col-9 grid-margin">
          {% for renouvellement in joueur.renouvellements %}
            {% if renouvellement.saison.id == app.session.get('saison').id %}
              {% if renouvellement.valide == true %}
                  <div class="alert alert-fill-success alert-dismissible fade show" role="alert">
                    <strong>{{ joueur.prenom }}&nbsp;{{ joueur.nom }}</strong> A UNE LICENCE VALIDE
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="btn-close"></button>
                  </div>
                {% else %}
                   <div class="alert alert-fill-warning alert-dismissible fade show" role="alert">
                <strong>{{ joueur.prenom }}&nbsp;{{ joueur.nom }}</strong> N'A PAS DE LICENCE VALIDE POUR CETTE SAISON
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="btn-close"></button>
              </div>
              {% endif %}
              
            {% endif %}
            
          {% endfor %}
          
            <div class="card">
              <div class="position-relative">
                <figure class="overflow-hidden mb-0 d-flex justify-content-center">
                
                <img src="{{ asset('uploads/photos/' ~ joueur.photo) }}" width="250" height="250" class="rounded-top" alt="profile cover">
                </figure>
                <div class="d-flex justify-content-between align-items-center position-absolute top-90 w-100 px-2 px-md-4 mt-n4">
                  <div>
                    <img class="wd-70 rounded-circle" src="{{ asset('uploads/logos/' ~ joueur.club.logo) }}" alt="profile">
                    <span class="h4 ms-3 text-dark">{{ joueur.prenom }}&nbsp;{{ joueur.nom }}</span>
                  </div>
                  <div class="d-none d-md-block">
                   <a href="{{ path('app_joueur_edit', {'id':joueur.id}) }}">
                      {% for role in app.user.roles %}
                      {% if role != 'ROLE_ADMIN_LIGUE' %}
                      <button class="btn btn-primary btn-icon-text">
                        <i data-feather="edit" class="btn-icon-prepend"></i> Modifier informations
                      </button>
                      {% endif %}
                      {% endfor %}
                    </a>
                  </div>
                </div>
              </div>
              <div class="d-flex justify-content-center p-3 rounded-bottom">
                <ul class="d-flex align-items-center m-0 p-0">
                      {% for role in app.user.roles %}
                        {% if role == 'ROLE_ADMIN' %}
                    <li class="d-flex align-items-center active">
                        <i class="me-1 icon-md text-success" data-feather="credit-card"></i>
                        <a class="pt-1px d-none d-md-block text-success" href="{{ path('app_user_card', {'id':joueur.id}) }}" target="_blank">Imprimer la carte</a>
                    </li>
                    
                    <li class="ms-3 ps-3 border-start d-flex align-items-center">
                        <i class="me-1 icon-md" data-feather="corner-up-right"></i>
                        <a class="pt-1px d-none d-md-block text-body" href="#" data-bs-toggle="modal" data-bs-target="#exampleModal">Transférer</a>
                    </li>
                    <li class="ms-3 ps-3 border-start d-flex align-items-center">
                    {{ include('joueur/_delete_form.html.twig') }}
                  </li>
                    {% endif %}
                    {% endfor %}
                  
                </ul>
              </div>
            </div>
            <div class="row profile-body mt-2">
              <!-- left wrapper start -->
              <div class="d-none d-md-block col-4 left-wrapper">
                <div class="card rounded">
                  <div class="card-body">
                    
                    <div class="mt-3">
                      <label class="tx-11 fw-bolder mb-0 text-uppercase">Numéro</label>
                      <p class="text-muted">{{joueur.email}}</p>
                    </div>
                    <div class="mt-3">
                      <label class="tx-11 fw-bolder mb-0 text-uppercase">Numéro</label>
                      <p class="text-muted">{{joueur.numero}}</p>
                    </div>
                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-0 text-uppercase">CATEGORIE</label>
                        <p class="text-muted">{{joueur.categorie}}</p>
                      </div>
                    <div class="mt-3">
                      <label class="tx-11 fw-bolder mb-0 text-uppercase">Date de naissance</label>
                      <p class="text-muted">{{ joueur.dateDeNaissance|date('d-M-Y') }}</p>
                    </div>
                    <div class="mt-3">
                      <label class="tx-11 fw-bolder mb-0 text-uppercase">Lieu de naissance :</label>
                      <p class="text-muted">{{ joueur.lieuDeNaissance }}</p>
                    </div>
                    <div class="mt-3">
                      <label class="tx-11 fw-bolder mb-0 text-uppercase">Adresse :</label>
                      <p class="text-muted">{{joueur.adresse}}</p>
                    </div>
                    <div class="mt-3">
                      <label class="tx-11 fw-bolder mb-0 text-uppercase">Téléphone :</label>
                      <p class="text-muted">{{joueur.telephone}}</p>
                    </div>
                    <div class="mt-3">
                      <label class="tx-11 fw-bolder mb-0 text-uppercase">Sexe :</label>
                      <p class="text-muted">Homme</p>
                    </div>
                  </div>
                </div>
              </div>
              <!-- left wrapper end -->
              <!-- middle wrapper start -->
              <div class="col-md-8">
                    <div class="card rounded">
                      <div class="card-header">
                        <div class="d-flex align-items-center justify-content-between">
                          <div class="d-flex align-items-center">
                            <img class="img-xs rounded-circle" src="https://via.placeholder.com/37x37" alt="">													
                            <div class="ms-2">
                              <p>CHRONOLOGIE</p>
                            </div>
                          </div>    
                        </div>
                      </div>
                      <div class="card-body">
                        <ul class="timeline">
                        {% for tj in joueur.traceJoueurs %}
                          <li class="event" data-date="{{ tj.date|date('d F Y H:i:s') }}">
                              <h3 class="title">{{tj.action}}</h3>
                              <p>{{tj.description}}</p>
                          </li>
                        {% else %}
                          no trace
                        {% endfor %}
                        </ul>
                      </div>
                    </div>
                
              </div>
              <!-- middle wrapper end -->
              <!-- right wrapper start -->
            </div>
          </div>
          <div class="col-3">
            <div class="card rounded">
              <a href="{{ path('app_club_show', {'id':joueur.club.id}) }}"><button class="btn btn-lg btn-block btn-info">{{ joueur.club }}</button></a>
                  <div class="card-body">
                    <h6 class="card-title">Autres joueurs du club</h6>
                    
                    {% for j in joueur.club.joueurs %}
                    {% if joueur != j %}                   
                    <div class="d-flex justify-content-between mb-2 pb-2 border-bottom">
                      <div class="d-flex align-items-center hover-pointer">
                        <img class="img-xs rounded-circle" src="{{ asset('uploads/photos/' ~ j.photo) }}" alt="">											
                        <div class="ms-2">
                          <p>{{ j.prenom }}&nbsp;{{j.nom}}</p>
                          <p class="tx-11 text-muted">{{j.numero}}</p>
                        </div>
                      </div>
                      <a href="{{ path('app_joueur_show', {'id':j.id}) }}"><button class="btn btn-icon border-0"><i data-feather="eye"></i></button></a>
                    </div>
                    {% endif %}
                    {% endfor %}
                  </div>
                </div>
          </div>
        </div>
       
    

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">AJOUT D'UNE NOUVELLE LIGUE</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="btn-close"></button>
          </div>
          <div class="modal-body">
             {{ include('joueur/_form.html.twig') }}
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
          </div>
        </div>
      </div>
    </div>
{% endblock %}
